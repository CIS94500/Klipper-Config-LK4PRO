# Klipper Configurations - Anycubic Vyper
#	 ___      ___  ________  ___  ___  ________
#	|"  \    /"  |/"       )|"  \/"  |/"       )
#	 \   \  //  /(:   \___/  \   \  /(:   \___/
#	  \\  \/. ./  \___  \     \\  \/  \___  \
#	   \.    //    __/  \\    /   /    __/  \\
#	    \\   /    /" \   :)  /   /    /" \   :)
#	     \__/    (_______/  |___/    (_______/
#
# 01010110  01010011  01011001  01010011
#
# Auteur: Virgile de Champigny
#
# Pour compiler le firmware de la carte mère, exécuter les commandes suivantes depuis le terminal SSH :
#
# > cd /home/pi/klipper/
# > make clean
# > make menuconfig
#
# Micro-controller: Atmega AVR
# Processor model: atmega2560
# Processor speed: 16Mhz
# Communication interface: UART0
#
# Compiler le firmware de la carte mère avec la commande :
# > make
#
# Nettoyage des fichiers générés avec la commande :
# > make clean
#
# flash de la carte mère de la LK4 Pro, exécuter les commandes suivantes depuis le terminal SSH :
#
# > cd /home/pi/klipper/
# > sudo service klipper stop
# > make flash FLASH_DEVICE=/dev/serial/by-id/usb-1a86_USB_Serial-if00-port0
# > sudo service klipper start
#
####################################################################
# FICHIERS A INCLURE
####################################################################

[include macros/*.cfg]
#[include adxl345.cfg]

####################################################################
# CARTE MERE - MCU
####################################################################

[mcu]
#    lancer la commande > ls /dev/serial/by-id/* depuis le terminal SSH pour obtenir votre serial.
serial: /dev/serial/by-id/usb-1a86_USB_Serial-if00-port0
#    Le port série à connecter à l'unité MCU. Si vous n'êtes pas sûr (ou s'il
#    change) consultez la section "Où est mon port série ?" de la FAQ.
#    Ce paramètre doit être fourni lors de l'utilisation d'un port série.
#baud: 250000
#    Le débit en bauds à utiliser. La valeur par défaut est 250000.
restart_method: arduino
#    Ceci contrôle le mécanisme que l'hôte utilisera pour réinitialiser le microcontrôleur.
#    Les choix sont 'arduino', 'cheetah', 'rpi_usb', et 'command'. La méthode 'arduino'
#    (basculer DTR) est courante sur les cartes et clones Arduino.
#    La méthode 'cheetah' est une méthode particulière nécessaire pour certaines cartes
#    Fysetc Cheetah. La méthode 'rpi_usb' est utile sur les cartes Raspberry Pi avec des
#    micro-contrôleurs alimentés par USB - elle désactive brièvement l'alimentation de tous
#    les ports USB pour effectuer une réinitialisation du microcontrôleur.
#    La méthode 'command' implique l'envoi d'une commande Klipper au microcontrôleur
#    afin qu'il puisse # se réinitialiser.
#    La valeur par défaut est 'arduino' si le micro-contrôleur communique via un port série,
#    'command' sinon.

####################################################################
# LIMITE DE LA MACHINE
####################################################################

[safe_z_home]
home_xy_position: 160.5, 115.5
#    Une coordonnée X, Y (par exemple 100, 100) où la mise à l'origine Z
#    doit être effectuée. Ce paramètre doit être fourni.
speed: 50.0
#    Vitesse à laquelle la tête de l'outil est déplacée vers la position de
#    référence Z sûre. La valeur par défaut est 50 mm/s
z_hop: 15
#    Distance (en mm) pour lever l'axe Z avant le retour au point d'origine.
#    Cette valeur est appliquée à toute commande d'initialisation, même
#    si elle n'initialise pas l'axe Z. Si l'axe Z est déjà ramené à la position
#    de base et que la position Z actuelle est inférieure à z_hop, alors ceci
#    lèvera la tête à une hauteur de z_hop. Si l'axe Z n'est pas déjà centré,
#    la tête est relevée de z_hop.
#    La valeur par défaut est de ne pas implémenter le relevage en Z.
z_hop_speed: 15.0
#    Vitesse (en mm/s) à laquelle l'axe Z est relevé avant le retour à la
#    position initiale. La valeur par défaut est de 15 mm/s.
#move_to_previous: False
#    Lorsqu'il a la valeur True, les axes X et Y sont réinitialisés à leurs
#    positions précédentes après retour à la position initiale de l'axe Z.
#    La valeur par défaut est False.

[printer]
kinematics: cartesian
#    Le type d'imprimante utilisée. Cette option peut être l'une des suivantes : cartésienne,
#    corexy, corexz, hybrid_corexy, hybrid_corexz, rotary_delta, delta, deltesian, polar, winch,
#    ou none. Ce paramètre doit être spécifié.
max_velocity: 300
#    Vitesse maximale (en mm/s) de la tête d'outil (par rapport à l'impression). Ce paramètre doit être spécifié.
max_accel: 3200
#max_accel: 3200
#    Accélération maximale (en mm/s^2) de la tête de l'outil (par rapport à l'impression).
#    Ce paramètre doit être spécifié.
#max_accel_to_decel: 1200
#    Une pseudo-accélération (en mm/s^2) contrôlant la vitesse à laquelle la tête de l'outil peut
#    passer de l'accélération à la décélération. Elle est utilisée pour réduire la vitesse maximale
#    des courts mouvements en zigzag (et donc réduire les vibrations de l'imprimante dues à ces
#    mouvements). La valeur par défaut est la moitié de max_accel.
square_corner_velocity: 5
#    La vitesse maximale (en mm/s) à laquelle la tête d'outil peut parcourir un angle de 90 degrés.
#    Une valeur non nulle peut réduire les changements dans les débits de l'extrudeuse en
#    permettant des changements de vitesse instantanés de la tête d'outil pendant les virages.
#    Cette valeur configure l'algorithme interne de prise de virage à vitesse centripète ; les virages
#    dont l'angle est supérieur à 90 degrés auront une vitesse de prise de virage plus élevée tandis
#    que ceux d'angles inférieurs à 90 degrés auront une vitesse de virage plus faible.
#    Si ce paramètre est défini sur zéro, la tête d'outil décélérera jusqu'à zéro à chaque coin.
#    La valeur par défaut est 5mm/s.
max_z_velocity: 5
#    Ceci définit la vitesse maximale (en mm/s) du mouvement le long de l'axe z
#    Ce paramètre peut être utilisé pour limiter la vitesse maximale du moteur pas à pas z.
#    La valeur par défaut est l'utilisation de max_velocity pour max_z_velocity.
max_z_accel: 100
#    Ce paramètre définit l'accélération maximale (en mm/s^2) du mouvement sur l'axe z.
#    Cela limite l'accélération du moteur pas à pas z. La valeur par défaut est
#    d'utiliser max_accel pour max_z_accel.

####################################################################
# DÉLAI D'INACTIVITÉ
####################################################################

[idle_timeout]
#gcode:
#    Une liste de commandes G-Code à exécuter lors d'un délai d'inactivité. Voir
#    docs/Command_Templates.md pour le format G-Code. La valeur par défaut
#    est d'exécuter "TURN_OFF_HEATERS" et "M84".
timeout: 1800
#    Durée d'attente (en secondes) avant d'exécuter les commandes G-Code ci-dessus.
#    La valeur par défaut est de 600 secondes.

####################################################################
# STEEPER
####################################################################

[stepper_x]
step_pin: PF0
#    Broche GPIO du moteur (déclenchée à l'état haut). Ce paramètre doit être fourni.
dir_pin: !PF1
#    Broche GPIO de direction (le niveau haut indique une direction positive). Ce paramètre doit être fourni.
enable_pin: !PD7
#    Broche d'activation (par défaut, enable est haut ; utilisez ! pour indiquer enable
#    bas). Si ce paramètre n'est pas fourni, le pilote du moteur pas à pas doit toujours être activé.
microsteps: 16
#    Le nombre de micropas utilisés par le pilote du moteur pas à pas. Ce paramètre doit être fourni.
rotation_distance: 40
#    Distance (en mm) parcourue par l'axe lors d'une rotation complète du moteur pas à pas
#    (ou de l'engrenage final si le rapport de vitesse est spécifié). Ce paramètre doit être fourni.
full_steps_per_rotation: 200
#    Nombre de pas complets pour une rotation complète du moteur pas à pas.
#    Réglez ce paramètre sur 200 pour un moteur pas à pas de 1,8 degré ou sur 400 pour
#    un moteur de 0,9 degré. La valeur par défaut est 200.
endstop_pin: ^!PE5
#    Broche de détection de l'interrupteur de fin de course. Si cette broche est sur un mcu différent de
#    celui du moteur pas à pas, cela active le "multi-mcu". Ce paramètre doit être fourni pour les moteurs
#    pas à pas X, Y, et Z sur les imprimantes de style cartésien.
position_endstop: 0
#    Emplacement de la butée (en mm). Ce paramètre doit être fourni pour les moteurs X, Y et Z
#    des imprimantes de style cartésien.
position_min: 0
#    Distance minimale valide (en mm) vers laquelle l'utilisateur peut commander le moteur pas à pas.
#    La valeur par défaut est 0mm.
position_max: 235
#    Distance maximale valide (en mm) vers laquelle l'utilisateur peut ordonner au moteur de se déplacer.
#    Ce paramètre doit être fourni pour les moteurs X, Y, et Z des imprimantes de type cartésien.
homing_speed: 50.0
#    Vitesse maximale (en mm/s) du moteur pas à pas lors de la mise à l'origine.
#    La valeur par défaut est de 5mm/s.

#-----------------------------------------------------------------#

[stepper_y]
step_pin: PF6
dir_pin: PF7
enable_pin: !PF2
microsteps: 16
rotation_distance: 40
full_steps_per_rotation: 200
endstop_pin: ^!PJ1
position_endstop: 0
position_min: 0
position_max: 235
homing_speed: 50

#-----------------------------------------------------------------#

[stepper_z]
step_pin: PL3
dir_pin: !PL1
enable_pin: !PK0
microsteps: 16
rotation_distance: 8
full_steps_per_rotation: 200
endstop_pin: ^!PC2
endstop_pin: probe:z_virtual_endstop
position_min: -3
position_max: 250
homing_speed: 5.0

####################################################################
# CONFIGURATION EXTRUDEUR
#-------------------------------------------------------------------
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> CONTROL, PID_KP, PID_KI, PID_KD.
####################################################################

[extruder]
step_pin: PA4
#    Broche GPIO du moteur (déclenchée à l'état haut). Ce paramètre doit être fourni.
dir_pin: PA6
#    Broche GPIO de direction (le niveau haut indique une direction positive). Ce paramètre doit être fourni
enable_pin: !PA2
#    Broche d'activation (par défaut, enable est haut ; utilisez ! pour indiquer enable
#    bas). Si ce paramètre n'est pas fourni, le pilote du moteur pas à pas doit toujours être activé.
microsteps: 16
#    Le nombre de micropas utilisés par le pilote du moteur pas à pas. Ce paramètre doit être fourni.
rotation_distance: 22.915
#    rotation_distance = <previous_rotation_distance> * <actual_extrude_distance> / <requested_extrude_distance>
#    pour commencer, mesurer le diametre de la roue de l'extrudeur : mesure x 3.14 = rotation distance.
#    Distance (en mm) parcourue par l'axe lors d'une rotation complète du moteur pas à pas
#    (ou de l'engrenage final si le rapport de vitesse est spécifié). Ce paramètre doit être fourni.
full_steps_per_rotation: 200
#    Nombre de pas complets pour une rotation complète du moteur pas à pas.
#    Réglez ce paramètre sur 200 pour un moteur pas à pas de 1,8 degré ou sur 400 pour
#    un moteur de 0,9 degré. La valeur par défaut est 200.
gear_ratio: 50:17
#    Le rapport d'engrenage si le moteur pas à pas est relié à l'axe via une démultiplication.
#    Par exemple, on peut spécifier "5:1" si un réducteur de 5 pour 1 est utilisé.
#    Si l'axe a plusieurs démultiplications, on peut spécifier une liste de rapports séparés par
#    des virgules (par exemple, "57:11, 2:1"). Si un rapport de vitesse est spécifié, alors
#    rotation_distance spécifie la distance parcourue par l'axe pour une rotation complète
#    de l'engrenage final. La valeur par défaut est de ne pas utiliser de rapport de vitesse.
nozzle_diameter: 0.400
#    Diamètre de l'orifice de la buse (en mm). Ce paramètre doit être fourni.
filament_diameter: 1.750
#    Diamètre moyen du filament (en mm) lorsqu'il entre dans l'extrudeuse. Ce paramètre doit être fourni.
heater_pin: PB4
#    Broche de sortie PWM contrôlant le chauffage. Ce paramètre doit être fourni.
sensor_type: EPCOS 100K B57560G104F
#    Type de capteur - les thermistances courantes sont "EPCOS 100K B57560G104F",
#    "ATC Semitec 104GT-2", "ATC Semitec 104NT-4-R025H42G", "Generic
#    3950", "Honeywell 100K 135-104LAG-J01", "NTC 100K MGB18-104F39050L32",
#    "SliceEngineering 450", et "TDK NTCG104LH104JT1". Voir la section "Capteurs de
#    température" pour d'autres capteurs. Ce paramètre doit être fourni.
sensor_pin: PK5
#    Broche d'entrée analogique connectée au capteur. Ce paramètre doit être fourni.
#control: pid
#    Algorithme de contrôle (soit pid, soit watermark). Ce paramètre doit être fourni.
#pid_kp: 29.370
#pid_ki: 1.764
#pid_kd: 122.253
#    Les paramètres proportionnels (pid_Kp), intégraux (pid_Ki), et dérivés (pid_Ki)
#    du système de contrôle par rétroaction PID. Klipper évalue les paramètres PID
#    avec la formule générale suivante :
#        fan_pwm = max_power - (Kp*e + Ki*integral(e) - Kd*derivative(e)) / 255
#    Où "e" est "température_cible - température_mesurée" et
#    "fan_pwm" est le débit du ventilateur demandé, 0,0 correspondant à un arrêt complet
#    et 1,0 correspond à un fonctionnement à plein régime. Les paramètres pid_Kp, pid_Ki,
#    et pid_Kd doivent être fournis lorsque l'algorithme de contrôle PID est activé.
min_temp: 0
max_temp: 250
#    La plage maximale de températures valides (Celsius) dans laquelle l'élément de
#    chauffe doit rester. Ceci contrôle une fonction de sécurité implémentée dans le code
#    du micro-contrôleur - si la température mesurée sort de cette plage, le microcontrôleur
#    se met en état d'arrêt. Ce contrôle peut aider à détecter certaines défaillances matérielles
#    de l'élément chauffant et/ou du capteur. Définissez cette plage suffisamment large pour
#    que des températures raisonnables n'entraînent pas d'erreur. Ces paramètres doivent être fournis.
min_extrude_temp: 170
#   La température minimale (Celsius) au-dessus de laquelle les commandes de
#   déplacement de l'extrudeuse peuvent être émises. La valeur par défaut est 170° C.
pressure_advance: 0
#    La quantité de filament à pousser dans l'extrudeuse durant l'accélération de celle-ci.
#    Une quantité égale de filament est rétractée durant la décélération. Elle est mesurée
#    en millimètre/seconde. La valeur par défaut est 0, ce qui désactive la fonctionnalité
#    d'avance de pression.
pressure_advance_smooth_time: 0.040
#    Une durée (en secondes) à utiliser lors du calcul de la vitesse moyenne de l'extrudeuse
#    pour l'avance de pression. Une valeur plus grande donne lieu à des mouvements
#    d'extrusion plus lisses. Ce paramètre ne doit pas dépasser 200ms.
#    Ce paramètre ne s'applique que si pressure_advance est différent de zéro. La valeur
#    par défaut est 0.040 (40 millisecondes).
max_extrude_only_distance: 500.0
#    Longueur maximale (en mm de filament) qu'un mouvement de rétraction ou d'extrusion
#    peut fournir. Si un mouvement de rétraction ou d'extrusion unique demande une
#    distance supérieure à cette valeur, une erreur sera renvoyée.
#    La valeur par défaut est 50mm.
instantaneous_corner_velocity: 15
#    La variation instantanée maximale de la vitesse (en mm/s) de l'extrudeuse
#    pendant la jonction de deux mouvements. La valeur par défaut est 1mm/s.
max_extrude_only_accel: 2000
#    Vitesse maximale (en mm/s) et accélération (en mm/s^2) du moteur de l'extrudeuse
#    pour les rétractions et les mouvements d'extrusion seuls. Ces paramètres n'ont aucun
#    impact sur les mouvements d'impression normaux. S'ils ne sont pas spécifiés, ils sont
#    calculés pour correspondre à la limite d'un mouvement qu'une impression de
#    section transversale de 4.0*diamètre_buse^2 aurait.
max_extrude_cross_section: 50
#    Surface maximale (en mm^2) d'une section transversale d'extrusion (ex:
#    largeur de l'extrusion multipliée par la hauteur de la couche). Ce paramètre
#    permet d'éviter d'extruder des quantités excessives durant de petits déplacements
#    XY. Si un déplacement demande une quantité d'extrusion supérieure à cette valeur,
#    une erreur sera renvoyée. La valeur par défaut est 4.0 *diamètre_buse^2

####################################################################
# CONFIGURATION PLATEAU CHAUFFANT
#-------------------------------------------------------------------
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> CONTROL, PID_KP, PID_KI, PID_KD.
####################################################################

[heater_bed]
heater_pin: PH5
#    Broche de sortie PWM contrôlant le chauffage. Ce paramètre doit être fourni.
sensor_type: EPCOS 100K B57560G104F
#    Type de capteur - les thermistances courantes sont "EPCOS 100K B57560G104F",
#    "ATC Semitec 104GT-2", "ATC Semitec 104NT-4-R025H42G", "Generic
#    3950", "Honeywell 100K 135-104LAG-J01", "NTC 100K MGB18-104F39050L32",
#    "SliceEngineering 450", et "TDK NTCG104LH104JT1". Voir la section "Capteurs de
#    température" pour d'autres capteurs. Ce paramètre doit être fourni.
sensor_pin: PK6
#    Broche d'entrée analogique connectée au capteur. Ce paramètre doit être fourni.
min_temp: 0
max_temp: 110
#    La plage maximale de températures valides (Celsius) dans laquelle l'élément de
#    chauffe doit rester. Ceci contrôle une fonction de sécurité implémentée dans le code
#    du micro-contrôleur - si la température mesurée sort de cette plage, le microcontrôleur
#    se met en état d'arrêt. Ce contrôle peut aider à détecter certaines défaillances matérielles
#    de l'élément chauffant et/ou du capteur. Définissez cette plage suffisamment large pour
#    que des températures raisonnables n'entraînent pas d'erreur. Ces paramètres doivent être fournis.
#control: pid
#   Algorithme de contrôle (soit pid, soit watermark). Ce paramètre doit être fourni.
#pid_kp: 67.612
#pid_ki: 1.011
#pid_kd: 1130.805
#    Les paramètres proportionnels (pid_Kp), intégraux (pid_Ki) et dérivés (pid_Kd)
#    du système de contrôle de rétroaction PID. Klipper évalue les paramètres PID avec
#    la formule générale suivante :
#       heater_pwm = (Kp*erreur + Ki*intégrale(erreur) - Kd*dérivée(erreur)) / 255
#    Où "erreur" est le résultat de "requested_temperature - measured_temperature" et
#    "heater_pwm" est le taux de chauffage demandé, 0.0 étant complètement éteint et
#    1.0 étant complètement allumé. Pensez à utiliser la commande PID_CALIBRATE pour
#    obtenir ces paramètres.  Les paramètres pid_Kp, pid_Ki, et pid_Kd doivent être
#    fournis pour l'algorithme PID.

####################################################################
# REFROIDISSEMENT
####################################################################

[fan]
pin: PH6
#   Broche de sortie contrôlant le ventilateur. Ce paramètre doit être fourni.
max_power: 1.0
#    La puissance maximale (exprimée en tant que valeur comprise entre 0,0 et 1,0) à laquelle
#    régler la broche. La valeur 1.0 permet de régler la broche entièrement activée pendant de
#    longues périodes, tandis qu'une valeur de 0,5 permet à la broche de n'être activée que
#    durant la moitié du temps au maximum. Ce paramètre peut être utilisé pour limiter la
#    puissance totale de sortie (sur des périodes prolongées) du ventilateur.
#    Si cette valeur est inférieure à 1,0, les demandes de vitesse du ventilateur seront mises à
#    l'échelle entre zéro et max_power (par exemple, si la puissance maximale est de 0,9 et
#    qu'une vitesse de 80 % est demandée, la puissance du ventilateur sera réglée à 72 %.
#    La valeur par défaut est 1.0.
#cycle_time:
#    La durée (en secondes) de chaque cycle d'alimentation PWM du ventilateur. Il est
#    recommandé que cette durée soit de 10 millisecondes ou plus si vous utilisez un PWM logiciel.
#    La valeur par défaut est de 0,010 seconde.
kick_start_time: 0.3
#    Durée (en secondes) de fonctionnement du ventilateur à pleine vitesse, soit lors de sa première
#    activation soit lors d'une augmentation de plus de 50% (pour faire tourner le ventilateur).
#    La valeur par défaut est de 0,100 seconde.
#off_below: 0.30
#    La vitesse d'entrée minimale qui alimentera le ventilateur (exprimée comme une valeur
#    comprise entre 0,0 et 1,0). Quand une vitesse inférieure à off_below est demandée le ventilateur
#    sera désactivé. Ce réglage peut être utilisé pour éviter que le ventilateur ne cale et pour
#    garantir que les démarrages sont efficaces.
#    La valeur par défaut est 0.0.
#
#    Ce paramètre doit être recalibré chaque fois que max_power est ajusté.
#    Pour calibrer ce paramètre, commencez avec off_below réglé sur 0.0 et ventilateur tournant. Diminuez
#    progressivement la vitesse du ventilateur afin de déterminer la vitesse d'entrée la plus faible entraînant
#    le ventilateur de manière fiable sans décrochage. Réglez off_below au rapport cyclique correspondant
#    à cette valeur (par exemple, 12% -> 0,12) ou légèrement plus.
#-----------------------------------------------------------------#

####################################################################
# BED MESH - PROBE - PROBE RESET PIN - PROBE RESET
####################################################################

[bed_mesh]
speed: 100
#    La vitesse (en mm/s) des déplacements entre les points de palpage
#    durant l'étalonnage. La valeur par défaut est 50.
horizontal_move_z: 10.0
#    La hauteur (en mm) à laquelle la tête doit être relevée juste avant de
#    lancer une opération de palpage. La valeur par défaut est 5.
mesh_min: 10, 13
#    Définit les coordonnées X, Y minimales du maillage pour les lits
#    rectangulaires. Ces coordonnées sont relatives à l'emplacement de la
#    sonde. Cette position sera le premier point sondé, le plus proche de
#    l'origine. Ce paramètre doit être fourni pour des lits rectangulaires.
mesh_max: 185, 230
#    Définit les coordonnées X, Y maximales du maillage pour les lits
#    rectangulaires. Le principe est le même que pour mesh_min, mais ce
#    sera le point le plus éloigné atteignable par rapport à l'origine du lit.
#    Ce paramètre  doit être fourni pour des lits rectangulaires.
probe_count: 9, 9
#    Pour les lits rectangulaires, il s'agit d'une paire d'entiers X, Y séparés par
#    des virgules, définissant le nombre de points à palper le long de chaque
#    axe. Une valeur seule est également valide, auquel cas cette valeur sera
#    appliquée aux deux axes. La valeur par défaut est 3, 3.
#move_check_distance: 5.0
#    La distance (en mm) le long d'un mouvement pour vérifier le split_delta_z.
#    C'est également la longueur minimale pour laquelle un mouvement peut
#    être divisé. La valeur par défaut est 5.0.
mesh_pps: 2, 2
#    Une paire de nombres entiers X, Y séparés par des virgules, définissant le
#    nombre de points par segment à interpoler dans le maillage le long de
#    chaque axe. Un "segment" étant défini comme l'espace entre chaque point
#    palpé. L'utilisateur peut saisir une seule valeur s'appliquant alors aux
#    deux axes. La valeur par défaut est 2, 2.
algorithm: bicubic
#    L'algorithme d'interpolation à utiliser. Soit "lagrange", soit "bicubic".
#    Cette option n'affecte pas les grilles 3x3 forcées d'utiliser l'échantillonnage
#    de lagrange. La valeur par défaut est lagrange.
#bicubic_tension: .2
#    Lors de l'utilisation de l'algorithme bicubic, le paramètre de tension ci-
#    dessus peut être appliqué pour modifier la quantité de pente interpolée.
#    Des nombres plus grands augmenteront la quantité de pente entraînant
#    une plus grande courbure du maillage. La valeur par défaut est 0,2.
fade_start: 1.0
#    La position z du gcode à partir de laquelle il faut commencer à éliminer
#    progressivement l'ajustement z lorsque la compensation est activée.
#    La valeur par défaut est 1.0.
fade_end: 10.0
#    La position z du gcode à partir de laquelle la compensation se termine.
#    Lorsqu'elle est définie à une valeur inférieure à fade_start, la compensation
#    est désactivée. Notez que la compensation peut ajouter une mise à l'échelle
#    indésirable le long de l'axe z d'une impression. Si un utilisateur souhaite
#    activer la compensation, une valeur de 10.0 est recommandée.
#    La valeur par défaut est 0.0, ce qui désactive la compensation.
#faulty_region_1_min:
#faulty_region_1_max:
#   Points optionnels définissant une région défectueuse.
#   Voir docs/Bed_Mesh.md pour plus de détails sur les régions défectueuses.
#   Jusqu'à 99 régions défectueuses peuvent être ajoutées.
#   Par défaut, aucune région défectueuse n'est définie.
#---------------------------------------------------------------
# ADAPTATIF
#---------------------------------------------------------------
#relative_reference_index: 40
#   regle : probe_count: 9,9 donc 9*9 / 2 ne garder que le chiffre avant la virgule
#   Un index de points dans le maillage auquel référencer toutes les valeurs z.
#   En activant ce paramètre, on produit un maillage relatif à la position z palpée
#   de l'indice fourni.

####################################################################
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> Z_OFFSET.
####################################################################

[bltouch]
sensor_pin: ^PC2
#   Broche connectée à la broche du capteur (sensor) BLTouch. La plupart des BLTouch
#   exigent un pullup sur la broche du capteur (préfixez le nom de la broche par "^").
#   Ce paramètre doit être fourni.
control_pin: PH4
#   Broche connectée à la broche de commande du BLTouch.
#   Ce paramètre doit être fourni.
pin_move_time: 0.680
#   Durée d'attente (en secondes) pour que la broche BLTouch se déplace vers
#   le haut ou le bas. La valeur par défaut est de 0,680 seconde.
#stow_on_each_sample: True
#   Détermine si Klipper doit ordonner à la broche de se déplacer vers le haut entre
#   chaque palpage lors d'une séquence de palpages multiples.
#   Lisez les instructions dans docs/BLTouch.md avant de régler ce paramètre à False.
#   La valeur par défaut est True.
#probe_with_touch_mode: False
#   Si ce paramètre est défini sur True, Klipper palpera avec le périphérique en
#   "touch_mode". La valeur par défaut est False (palpage en mode "pin_down").
#set_output_mode:
#   Demande un mode de sortie particulier de la broche du capteur sur un BLTouch V3.0
#   (et ultérieurs). Ce paramètre ne doit pas être utilisé sur d'autres types de sondes.
#   Réglez sur "5V" pour demander une sortie de 5 Volts de la broche du capteur (à n'utiliser
#   que si la carte contrôleur nécessite le mode 5V et est tolérante à 5V sur sa ligne de signal
#   d'entrée). Réglez sur "OD" pour demander l'utilisation de la sortie de la broche du capteur
#   en mode drain ouvert. La valeur par défaut est de ne pas demander de mode de sortie.
x_offset: -50.0
#    La distance (en mm) entre la sonde et la buse le long de l'axe x.
#    La valeur par défaut est 0.
y_offset: -5.0
#    La distance (en mm) entre la sonde et la buse le long de l'axe y.
#    La valeur par défaut est 0.
#z_offset: 0.0
#    La distance (en mm) entre le lit et la buse lorsque la sonde se déclenche.
#    Ce paramètre doit être fourni.
speed: 20.0
#    Vitesse (en mm/s) de l'axe Z lors du palpage. La valeur par défaut est 5mm/s.
#lift_speed: 5
#    Vitesse (en mm/s) de l'axe Z lors du levage de la sonde entre les échantillons.
#    La valeur par défaut est la même que celle du paramètre 'speed'.
samples: 2
#    Le nombre de fois où il faut palper chaque point. Les valeurs z palpées seront
#    moyennées. La valeur par défaut est de palper 1 fois.
sample_retract_dist: 5.0
#    Distance (en mm) à parcourir pour relever la tête de l'outil entre chaque palpage
#    (en cas d'échantillonnage multiple). La valeur par défaut est 2mm.
samples_result: average
#    La méthode de calcul lorsque l'on échantillonne plusieurs fois - soit "médiane"
#    (median) ou "moyenne" (average). La valeur par défaut est "moyenne".
samples_tolerance: 0.100
#    La distance Z maximale (en mm) à laquelle un échantillon peut différer des autres
#    échantillons. Si cette tolérance est dépassée, soit une erreur est signalée soit une
#    tentative de palpage est recommencée (cf. samples_tolerance_retries).
#    La valeur par défaut est 0.100mm.
samples_tolerance_retries: 2
#    Le nombre de fois qu'il faut réessayer quand un palpage dépasse la tolérance des
#    échantillons. Lors d'une nouvelle tentative, tous les échantillons en cours sont rejetés
#    et une tentative de palpa est relancée. Si un ensemble valide d'échantillons n'est pas
#    obtenu dans le nombre de tentatives donné, une erreur est signalée. La valeur par défaut
#    est zéro, ce qui entraîne le signalement d'une erreur dès le premier échantillon dépassant
#    la tolérance de samples_tolerance.
#---------------------------------------------------------------
# CLONE DES BLTOUCH
#---------------------------------------------------------------
#pin_up_reports_not_triggered: True
#   Définit si le BLTouch rapporte systématiquement le palpeur dans un état "non
#   déclenché" après une commande "pin_up" réussie. Ceci devrait être True pour
#   tous les BLTouch authentiques. Lisez les instructions de docs/BLTouch.md avant
#   de régler cette valeur à False. La valeur par défaut est True.
#pin_up_touch_mode_reports_triggered: True
#   Définit si le BLTouch rapporte systématiquement un état "déclenché" après la
#   commande "pin_up_mode_reports_triggered". Ceci devrait être True pour tous les
#   BLTouch authentiques. Lisez les instructions de docs/BLTouch.md avant de régler
#   cette valeur à False. La valeur par défaut est True.


####################################################################
# PROTECTION THERMAL
####################################################################

[verify_heater extruder]
max_error: 130
#    L'erreur de température cumulée maximale avant de déclencher une erreur.
#    Des valeurs plus petites entraînent une vérification plus stricte et des valeurs
#    plus grandes permettent un délai plus long avant qu'une erreur ne soit signalée.
#    Plus précisément, la température est inspectée une fois par seconde et si elle
#    est proche de la température cible, un "compteur d'erreurs" interne est remis
#    à zéro; sinon, si la température est inférieure à la plage cible, le compteur est
#    augmenté de la quantité de température rapportée différant de cette plage. Si
#    le compteur dépasse ce "max_error", une erreur est signalée. La valeur par
#    défaut est 120.
#check_gain_time:
#    Ceci contrôle la vérification du chauffage durant la chauffe initiale. Des valeurs
#    plus petites entraînent une vérification plus stricte et des valeurs plus grandes
#    autorisent un délai plus grand avant qu'une erreur ne soit signalée. Spécifiquement,
#    pendant la chauffe initiale, tant que la température de l'élément chauffant augmente
#    durant ce laps de temps (spécifié en secondes), le "compteur d'erreurs" interne est
#    remis à zéro. La valeur par défaut est de 20 secondes pour les extrudeuses et 60
#    secondes pour le lit chauffant.
hysteresis: 5
#    La différence de température maximale (en Celsius) par rapport à une température
#    cible considérée comme située dans la plage de la cible. Ceci contrôle la vérification
#    de la plage du paramètre max_error. Il est rare de personnaliser cette valeur.
#    La valeur par défaut est 5.
#heating_gain: 2
#    La température minimale (en Celsius) pour laquelle le chauffage doit progresser
#    pendant la période de check_gain_time. Il est rare de personnaliser cette valeur.
#    La valeur par défaut est 2.

#-----------------------------------------------------------------#

[verify_heater heater_bed]
max_error: 120
#    L'erreur de température cumulée maximale avant de déclencher une erreur.
#    Des valeurs plus petites entraînent une vérification plus stricte et des valeurs
#    plus grandes permettent un délai plus long avant qu'une erreur ne soit signalée.
#    Plus précisément, la température est inspectée une fois par seconde et si elle
#    est proche de la température cible, un "compteur d'erreurs" interne est remis
#    à zéro; sinon, si la température est inférieure à la plage cible, le compteur est
#    augmenté de la quantité de température rapportée différant de cette plage. Si
#    le compteur dépasse ce "max_error", une erreur est signalée. La valeur par
#    défaut est 120.
#check_gain_time:
#    Ceci contrôle la vérification du chauffage durant la chauffe initiale. Des valeurs
#    plus petites entraînent une vérification plus stricte et des valeurs plus grandes
#    autorisent un délai plus grand avant qu'une erreur ne soit signalée. Spécifiquement,
#    pendant la chauffe initiale, tant que la température de l'élément chauffant augmente
#    durant ce laps de temps (spécifié en secondes), le "compteur d'erreurs" interne est
#    remis à zéro. La valeur par défaut est de 20 secondes pour les extrudeuses et 60
#    secondes pour le lit chauffant.
hysteresis: 5
#    La différence de température maximale (en Celsius) par rapport à une température
#    cible considérée comme située dans la plage de la cible. Ceci contrôle la vérification
#    de la plage du paramètre max_error. Il est rare de personnaliser cette valeur.
#   La valeur par défaut est 5.
#heating_gain: 2
#    La température minimale (en Celsius) pour laquelle le chauffage doit progresser
#    pendant la période de check_gain_time. Il est rare de personnaliser cette valeur.
#    La valeur par défaut est 2.

####################################################################
# CAPTEUR DE FIN DE FILAMENT
####################################################################

[filament_switch_sensor filament_sensor]
switch_pin: ^!PE4
#    La broche sur laquelle l'interrupteur est connecté. Ce paramètre doit être fourni.
pause_on_runout: False
#    Lorsque défini sur True, une PAUSE sera exécutée immédiatement après qu'un runout
#    soit détecté. Notez que si pause_on_runout est False et que le runout_gcode est omis,
#    la détection du runout est désactivée. Par défaut, est True.
runout_gcode:
	PAUSE
	M104 S0
	# RESPOND MSG="GoToPanel:extrude"
	M400
	RESPOND MSG="Changez le filament..."
#    Une liste de commandes G-Code à exécuter après la détection d'une fin de filament.
#    Voir docs/Command_Templates.md pour le format G-Code. Si pause_on_runout est
#    réglé sur True, ce G-code sera exécuté après la fin de la PAUSE. Par défaut, aucune
#    commande G-Code n'est exécutée.
#insert_gcode:
#    Une liste de commandes G-Code à exécuter après qu'une insertion de filament soit détectée.
#    Voir docs/Command_Templates.md pour le format G-Code. La valeur par défaut est de
#    n'exécuter aucune commande G-Code, ce qui désactive la détection de l'insertion.
#event_delay  3.0
#    La durée minimale en secondes à attendre entre les événements.
#    Des événements déclenchés durant cette période seront silencieusement ignorés.
#    La valeur par défaut est de 3 secondes.
#pause_delay: 0.5
#    Le délai, en secondes, entre l'envoi de la commande de pause et l'exécution du runout_gcode.
#    Il peut être utile d'augmenter ce délai si OctoPrint présente un comportement étrange lors de
#    la pause. La valeur par défaut est 0.5 secondes.

####################################################################
# COMPENSATION DE RÉSONANCE
#-------------------------------------------------------------------
# SI VOUS SUPPRIMER LA CONFIGURATION GÉNÉRÉE AUTOMATIQUEMENT (EN BAS DE PAGE)
# DÉCOMMENTER -> SHAPER_TYPE_X, SHAPER_FREQ_X, SHAPER_TYPE_Y, SHAPER_FREQ_Y
####################################################################

[input_shaper]
#shaper_type_x: mzv
#    Si shaper_type n'est pas défini, ces deux paramètres peuvent être utilisés pour configurer
#    des formes d'entrée différentes pour les axes X et Y. Les valeurs supportées sont les
#    mêmes que celles du paramètre shaper_type.
#shaper_freq_x: 78.2
#    Fréquence (en Hz) de la mise en forme de l'entrée pour l'axe X. Il s'agit généralement
#    d'une fréquence de résonance de l'axe X que la mise en forme de l'entrée doit supprimer.
#    Pour les mises en forme plus complexes, comme les mises en forme à 2 ou 3 bosses EI
#    (2hump/3hump), ce paramètre peut être défini à partir de différentes considérations.
#    La valeur par défaut est 0, ce qui désactive la mise en forme de l'entrée pour l'axe X.
#shaper_type_y: mzv
#    Si shaper_type n'est pas défini, ces deux paramètres peuvent être utilisés pour configurer
#    des formes d'entrée différentes pour les axes X et Y. Les valeurs supportées sont les
#    mêmes que celles du paramètre shaper_type.
#shaper_freq_y: 32.8
#    Fréquence (en Hz) de la mise en forme de l'entrée pour l'axe Y. Il s'agit généralement
#    d'une fréquence de résonance de l'axe Y que la mise en forme de l'entrée doit supprimer.
#    Pour les mises en forme plus complexes, comme les mises en forme à 2 ou 3 bosses EI
#    (2hump/3hump), ce paramètre peut être défini à partir de différentes considérations.
#    La valeur par défaut est 0, ce qui désactive la mise en forme de l'entrée pour l'axe Y.

####################################################################
# AUTRES
####################################################################

[screws_tilt_adjust]
screw1: 85,40
# La coordonnée (X, Y) de la première vis de nivellement du lit. pour que la sonde soit directement
# au-dessus de la vis du lit (ou le plus près possible tout en étant
# au-dessus du lit). C'est la vis de base utilisée dans les calculs. Ce
# paramètre doit être fourni.
screw1_name: Avant gauche
# Un nom arbitraire pour la vis donnée. Ce nom s'affiche lorsque
# le script d'assistance s'exécute. La valeur par défaut est d'utiliser un nom basé sur
# l'emplacement XY de la vis.
screw2: 235,40
screw2_name: Avant droit
screw3: 235,211
screw3_name: Arriere droit
screw4: 85,211
screw4_name: Arriere gauche
speed: 120
# La vitesse (en mm/s) des mouvements sans palpage pendant l'étalonnage.
# La valeur par défaut est 50.
horizontal_move_z: 5
# La hauteur (en mm) à laquelle la tête doit se déplacer
# juste avant de lancer une opération de détection. La valeur par défaut est 5.
screw_thread: CW-M3
# Le type de vis utilisé pour le nivellement du lit, M3, M4 ou M5, et la
# sens de rotation du bouton qui sert à niveler le lit.
# Valeurs acceptées: CW-M3, CCW-M3, CW-M4, CCW-M4, CW-M5, CCW-M5.
# La valeur par défaut est CW-M3 que la plupart des imprimantes utilisent. A dans le sens des aiguilles d'une montre
# la rotation du bouton diminue l'écart entre la buse et le
# lit. A l'inverse, une rotation dans le sens inverse des aiguilles d'une montre augmente l'écart.

#-----------------------------------------------------------------#

[temperature_sensor Orange_pi]
sensor_type: temperature_host
#    Le micro-contrôleur à lire. La valeur par défaut est "mcu".

#-----------------------------------------------------------------#

[gcode_arcs]
resolution: 1.0
#    Un arc sera divisé en segments. La longueur de chaque segment sera égale à
#    la résolution en mm définie ci-dessus. Des valeurs plus faibles produiront un
#    arc plus fin, mais également plus de travail de votre machine. Les arcs plus
#    petits que la valeur configurée deviendront des lignes droites. La valeur par
#    défaut est 1 mm.

#-----------------------------------------------------------------#

[pause_resume]
#recover_velocity: 50.
#    Lorsque la capture/restauration est activée, la vitesse à laquelle retourner à
#    la position capturée (en mm/s). La valeur par défaut est 50,0 mm/s.

#-----------------------------------------------------------------#

[display_status]
#    Les informations suivantes sont disponibles dans l’objet display_status (cet objet est
#    automatiquement disponible si une section de configuration affichage est définie) :
#    progress : la valeur de progression de la dernière commande G-Code M73 (ou virtual_sdcard.progress
#    si aucune commande M73 récente n'a été reçue.
#    message : Le message contenu dans la dernière commande G-Code M117.

#-----------------------------------------------------------------#

[respond]
#default_type: echo
#    Définit le préfixe par défaut de la sortie "M118" et "RESPOND" à l'un des
#    éléments suivants :
#            echo: "echo : " (C'est la valeur par défaut)
#            command: "// "
#            error: " !! "
#default_prefix: echo:
#    Définit directement le préfixe par défaut. Si elle est présente, cette valeur
#    remplacera celle de "default_type".

#-----------------------------------------------------------------#

[exclude_object]
#    Permet de prendre en charge l'exclusion ou l'annulation d'objets
#    individuels pendant le processus d'impression.

####################################################################

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 67.612
#*# pid_ki = 1.011
#*# pid_kd = 1130.805
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 29.370
#*# pid_ki = 1.764
#*# pid_kd = 122.253
#*#
#*# [bltouch]
#*# z_offset = 1.920
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.031250, -0.000000, -0.001250, -0.016250, -0.037500, -0.010000, -0.006250, -0.006250, 0.003750
#*# 	0.088750, 0.056250, 0.072500, 0.048750, 0.036250, 0.067500, 0.077500, 0.081250, 0.100000
#*# 	0.026250, -0.000000, 0.010000, -0.011250, -0.005000, 0.013750, 0.020000, 0.035000, 0.065000
#*# 	-0.018750, -0.028750, -0.012500, -0.032500, -0.015000, 0.010000, 0.023750, 0.038750, 0.057500
#*# 	-0.003750, -0.018750, -0.005000, -0.013750, 0.000000, 0.031250, 0.046250, 0.066250, 0.086250
#*# 	0.001250, -0.010000, 0.003750, -0.005000, -0.002500, 0.013750, 0.032500, 0.046250, 0.058750
#*# 	0.018750, 0.003750, 0.017500, 0.000000, 0.006250, 0.017500, 0.025000, 0.046250, 0.057500
#*# 	0.002500, -0.006250, 0.005000, -0.007500, 0.001250, 0.021250, 0.031250, 0.041250, 0.061250
#*# 	0.197500, 0.162500, 0.166250, 0.143750, 0.146250, 0.166250, 0.155000, 0.152500, 0.160000
#*# x_count = 9
#*# y_count = 9
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 184.96
#*# min_y = 13.0
#*# max_y = 229.96
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 78.2
#*# shaper_type_y = mzv
#*# shaper_freq_y = 32.8
